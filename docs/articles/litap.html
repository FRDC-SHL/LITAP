<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mapping flow: Getting Started • LITAP</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script><script src="../pkgdown.js"></script><!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">LITAP</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/index.html">Articles</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/steffilazerte/LITAP">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    <div class="page-header toc-ignore">
      <h1>Mapping flow: Getting Started</h1>
                        <h4 class="author">Steffi LaZerte</h4>
            
            <h4 class="date">2017-08-25</h4>
          </div>

    
    
<div class="contents">
<style>
.figure {
  max-width: 100%;
  margin: auto;
}
.table {
  width: auto;
  margin: auto;
}
</style>
<div id="basic-run" class="section level2">
<h2 class="hasAnchor">
<a href="#basic-run" class="anchor"></a>Basic run</h2>
<p>First load the LITAP package:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(LITAP)</code></pre></div>
<p>The only required parameters are the location of the dem file (<code>file</code>) and the number of rows and the number of columns (<code>nrow</code> and <code>ncol</code>) in the dem file.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/complete_run.html">complete_run</a></span>(<span class="dt">file =</span> <span class="st">"testElev.dem"</span>, <span class="dt">nrow =</span> <span class="dv">100</span>, <span class="dt">ncol =</span> <span class="dv">100</span>)</code></pre></div>
</div>
<div id="pit-removal-parameters" class="section level2">
<h2 class="hasAnchor">
<a href="#pit-removal-parameters" class="anchor"></a>Pit removal parameters</h2>
<p>The maximum size of initial watersheds which will be removed in the first step can also be specified:</p>
<ul>
<li>
<code>max_area</code> represents the maximum pit area (area of a watershed below it’s pour point) of a watershed to be removed in the initial step</li>
<li>
<code>max_depth</code> represents the maximum depth of a pit (difference between the elevation of the pour point and the elevation of the pit centre) of a watershed to be removed in the initial step</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/complete_run.html">complete_run</a></span>(<span class="dt">file =</span> <span class="st">"testElev.dem"</span>, <span class="dt">nrow =</span> <span class="dv">100</span>, <span class="dt">ncol =</span> <span class="dv">100</span>, <span class="dt">max_area =</span> <span class="dv">5</span>, <span class="dt">max_depth =</span> <span class="fl">0.2</span>)</code></pre></div>
</div>
<div id="output-folders" class="section level2">
<h2 class="hasAnchor">
<a href="#output-folders" class="anchor"></a>Output folders</h2>
<p>A LITAP run saves all output into three folders: <code>backup</code>, <code>dbf</code>, and <code>final</code>.</p>
<ul>
<li>
<code>backup</code> folder contains .rds files (R data files) used to resume a run from an intermediate point. These shouldn’t be used by the user.</li>
<li>
<code>dbf</code> folder contains .dbf files which mimic the output of the original LandMapR program</li>
<li>
<code>final</code> folder contains .csv and .rds files of the output, similar to that produced by the LandMapR program but designed for ease of use in R.</li>
</ul>
<p>LITAP will automatically prepend the run name according to the input file (e.g. in these examples it would be “test”)</p>
<p>You can specify where these output folders/files should be saved with <code>folder_out</code>. Otherwise the folders will be created in the folder of the original Elev.dem file, which may not be desirable. Note that folder locations are relative to working directory of the R session.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/complete_run.html">complete_run</a></span>(<span class="dt">file =</span> <span class="st">"testElev.dem"</span>, <span class="dt">nrow =</span> <span class="dv">100</span>, <span class="dt">ncol =</span> <span class="dv">100</span>, <span class="dt">folder_out =</span> <span class="st">"./Output/"</span>)</code></pre></div>
<p>To clean up any old files before conducting a new run, use <code>clean = TRUE</code>. <strong>Careful, this will remove all backup files from previous runs making it impossible to resume a run!</strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/complete_run.html">complete_run</a></span>(<span class="dt">file =</span> <span class="st">"testElev.dem"</span>, <span class="dt">nrow =</span> <span class="dv">100</span>, <span class="dt">ncol =</span> <span class="dv">100</span>, <span class="dt">folder_out =</span> <span class="st">"./Output/"</span>, 
    <span class="dt">clean =</span> <span class="ot">TRUE</span>)</code></pre></div>
</div>
<div id="subset-of-input-dem" class="section level2">
<h2 class="hasAnchor">
<a href="#subset-of-input-dem" class="anchor"></a>Subset of input dem</h2>
<p>To conduct a run on only a subset of the dem you can specify x and y limits:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/complete_run.html">complete_run</a></span>(<span class="dt">file =</span> <span class="st">"testElev.dem"</span>, <span class="dt">nrow =</span> <span class="dv">100</span>, <span class="dt">ncol =</span> <span class="dv">100</span>, <span class="dt">xlim =</span> <span class="kw">c</span>(<span class="dv">50</span>, <span class="dv">100</span>), 
    <span class="dt">ylim =</span> <span class="kw">c</span>(<span class="dv">50</span>, <span class="dv">100</span>))</code></pre></div>
</div>
<div id="output-messages" class="section level2">
<h2 class="hasAnchor">
<a href="#output-messages" class="anchor"></a>Output messages</h2>
<p>To prevent detailed output, use <code>verbose = FALSE</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/complete_run.html">complete_run</a></span>(<span class="dt">file =</span> <span class="st">"testElev.dem"</span>, <span class="dt">nrow =</span> <span class="dv">100</span>, <span class="dt">ncol =</span> <span class="dv">100</span>, <span class="dt">verbose =</span> <span class="ot">FALSE</span>)</code></pre></div>
<p>To prevent all output, use <code>quiet = TRUE</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/complete_run.html">complete_run</a></span>(<span class="dt">file =</span> <span class="st">"testElev.dem"</span>, <span class="dt">nrow =</span> <span class="dv">100</span>, <span class="dt">ncol =</span> <span class="dv">100</span>, <span class="dt">quiet =</span> <span class="ot">TRUE</span>)</code></pre></div>
</div>
<div id="resuming-a-run" class="section level2">
<h2 class="hasAnchor">
<a href="#resuming-a-run" class="anchor"></a>Resuming a run</h2>
<p>Each run of LITAP goes through 10 steps. A run can be halted or resumed at step by specifying the corresponding variable.</p>
<p>For example, to start with calculating pond statistics (step 5) and continue to the end of the run:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/complete_run.html">complete_run</a></span>(<span class="dt">file =</span> <span class="st">"testElev.dem"</span>, <span class="dt">nrow =</span> <span class="dv">100</span>, <span class="dt">ncol =</span> <span class="dv">100</span>, <span class="dt">continue =</span> <span class="st">"pond"</span>)</code></pre></div>
<p>Or to start with pond statistics and to end just after calculating fill statistics (step 6):</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/complete_run.html">complete_run</a></span>(<span class="dt">file =</span> <span class="st">"testElev.dem"</span>, <span class="dt">nrow =</span> <span class="dv">100</span>, <span class="dt">ncol =</span> <span class="dv">100</span>, <span class="dt">continue =</span> <span class="st">"pond"</span>, 
    <span class="dt">end =</span> <span class="st">"fill"</span>)</code></pre></div>
</div>
<div id="steps" class="section level2">
<h2 class="hasAnchor">
<a href="#steps" class="anchor"></a>Steps</h2>
<p>The variable in brackets defines the argument to use for continuing and ending a run.</p>
<ol style="list-style-type: decimal">
<li><p><strong>Calculating Directions</strong> (<code>directions</code>) Calculating the flow direction of each cell into a neighbouring cell</p></li>
<li><p><strong>Calculating Watersheds</strong> (<code>watersheds</code>) From the flow directions, combine cells into initial watersheds</p></li>
<li><p><strong>Calculating Watershed Area</strong> (<code>watershed_area</code>) Calculate the total area of each watershed</p></li>
<li><p><strong>Initial Pit Removal</strong> (<code>local</code>) Remove pits which are smaller than the maximum area and depth (and which are not edge pits). These pits are removed into neighbouring pits.</p></li>
<li><p><strong>Calculating Pond Shed Statistics Second Pit Removal)</strong> (<code>pond</code>) Calculate how pits would overflow into each other</p></li>
<li><p><strong>Calculating Fill Shed Statistics (Third Pit Removal)</strong> (<code>fill</code>)</p></li>
<li><p><strong>Calculating Directions on Inverted DEM</strong> (<code>inverted</code>) Reverse the elevations of the original DEM file. This will make all troughs into peaks, etc. Then calculate the flow direction of each cell into a neighbouring cell. Because the DEM is inverted, this will track upslope flow</p></li>
<li><p><strong>Calculating Inverted Watersheds</strong> (<code>iwatersheds</code>) From the flow directions, combine cells into initial watersheds</p></li>
<li><p><strong>Calculating Inverted Watershed Area</strong> (<code>iwatershed_area</code>) Calculate the total area of each watershed</p></li>
<li><p><strong>Initial Inverted Pit Removal</strong> (<code>ilocal</code>) Remove pits which are smaller than the maximum area and depth (and which are not edge pits). These pits are removed into neighbouring pits. Calculate watershed statistics on these resulting local pits. Because the DEM is inverted, this will highlight peaks and flow down from these peaks.</p></li>
</ol>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#basic-run">Basic run</a></li>
      <li><a href="#pit-removal-parameters">Pit removal parameters</a></li>
      <li><a href="#output-folders">Output folders</a></li>
      <li><a href="#subset-of-input-dem">Subset of input dem</a></li>
      <li><a href="#output-messages">Output messages</a></li>
      <li><a href="#resuming-a-run">Resuming a run</a></li>
      <li><a href="#steps">Steps</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Steffi LaZerte.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
